<html>
<head>
<title>Whack</title>
<style>
#field {
    width: 800px;
    height: 400px;
    border: 1px solid black;
}
</style>
</head>

<body>

<canvas id="field" width="800" height="400"></canvas>
<script src="field.js"></script>
<script src="scene.js"></script>
<script src="game.js"></script>
<script src="bullet.js"></script>
<script src="turret.js"></script>
<script src="critter.js"></script>
<script>

function random(min, max) {
	return  Math.floor(Math.random() * (max - min + 1)) + min;
}

document.addEventListener("DOMContentLoaded", function() {
	var canvas = document.getElementById("field");
	var ctx = canvas.getContext('2d');
	var field = new Field(800, 400, 50);
	var scene = new Scene(ctx);
	var game = new Game(field, scene);

	canvas.addEventListener("click", function(event) {
        var elemLeft = canvas.offsetLeft;
        var elemTop = canvas.offsetTop;
        var x = event.pageX - elemLeft;
        var y = event.pageY - elemTop;
        //game.click(x, y);
        game.spawnTurret(y);
    });

	game.setup();
	game.draw();
	game.running = requestAnimationFrame(function(t) {
		game.run(t);
	});

});

</script>
</body>
</html>